#!/usr/bin/env ruby

ENV['RAILS_ENV'] = 'development'

require_relative '../config/environment'

# TC_IAM_01

proxy = UpvsEnvironment.upvs_proxy(assertion: nil)
EformService.new(proxy).fetch_all_form_template_ids

# TC_IAM_01_NEG

properties = UpvsEnvironment.properties(assertion: nil).merge('upvs.sts.keystore.file' => 'security/podaas-inv-sts.keystore')
proxy = UpvsProxy.new(properties)

begin
  EformService.new(proxy).fetch_all_form_template_ids
rescue => exception
  raise exception unless exception.cause.is_a? com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl
end
